2019/01/29 08:45:20 [INFO] Configuration file location: /etc/hyperledger/fabric/ca/fabric-ca-server-config.yaml
2019/01/29 08:45:20 [INFO] Starting server in home directory: /etc/hyperledger/fabric/ca
2019/01/29 08:45:20 [INFO] Server Version: 1.2.0-stable
2019/01/29 08:45:20 [INFO] Server Levels: &{Identity:1 Affiliation:1 Certificate:1 Credential:1 RAInfo:1 Nonce:1}
2019/01/29 08:45:20 [DEBUG] Making server filenames absolute
2019/01/29 08:45:20 [DEBUG] Initializing default CA in directory /etc/hyperledger/fabric/ca
2019/01/29 08:45:20 [DEBUG] Init CA with home /etc/hyperledger/fabric/ca and config {Version:1.2.0-stable Cfg:{Identities:{AllowRemove:false} Affiliations:{AllowRemove:false}} CA:{Name:ca.hospital3.switch2logic.co.za Keyfile:/etc/hyperledger/fabric/ca/3bbd55855d6a60641a2343564bc54be004b7a26b9f4c8af211723c6661a9e9c9_sk Certfile:/etc/hyperledger/fabric/ca/ca.hospital3.switch2logic.co.za-cert.pem Chainfile:ca-chain.pem} Signing:0xc4201b3100 CSR:{CN:fabric-ca-server Names:[{C:US ST:North Carolina L: O:Hyperledger OU:Fabric SerialNumber:}] Hosts:[8065e417c46c localhost] KeyRequest:<nil> CA:0xc4201b4000 SerialNumber:} Registry:{MaxEnrollments:-1 Identities:[{ Name:**** Pass:**** Type:client Affiliation: MaxEnrollments:0 Attrs:map[hf.Registrar.Roles:* hf.Registrar.DelegateRoles:* hf.Revoker:1 hf.IntermediateCA:1 hf.GenCRL:1 hf.Registrar.Attributes:* hf.AffiliationMgr:1]  }]} Affiliations:map[org2:[department1] org1:[department1 department2]] LDAP:{ Enabled:false URL:ldap://****:****@<host>:<port>/<base> UserFilter:(uid=%s) GroupFilter:(memberUid=%s) Attribute:{[uid member] [{ }] map[groups:[{ }]]} TLS:{false [] { }}  } DB:{ Type:sqlite3 Datasource:fabric-ca-server.db TLS:{false [] { }}  } CSP:0xc4204feae0 Client:<nil> Intermediate:{ParentServer:{ URL: CAName:  } TLS:{Enabled:false CertFiles:[] Client:{KeyFile: CertFile:}} Enrollment:{ Name: Secret:**** CAName: AttrReqs:[] Profile: Label: CSR:<nil> Type:x509  }} CRL:{Expiry:24h0m0s} Idemix:{IssuerPublicKeyfile: IssuerSecretKeyfile: RevocationPublicKeyfile: RevocationPrivateKeyfile: RHPoolSize:0 NonceExpiration: NonceSweepInterval:}}
2019/01/29 08:45:20 [DEBUG] CA Home Directory: /etc/hyperledger/fabric/ca
2019/01/29 08:45:20 [DEBUG] Checking configuration file version '1.2.0-stable' against server version: '1.2.0-stable'
2019/01/29 08:45:20 [DEBUG] Initializing BCCSP: &{ProviderName:SW SwOpts:0xc4204feb40 PluginOpts:<nil> Pkcs11Opts:<nil>}
2019/01/29 08:45:20 [DEBUG] Initializing BCCSP with software options &{SecLevel:256 HashFamily:SHA2 Ephemeral:false FileKeystore:0xc4201b2720 DummyKeystore:<nil>}
2019/01/29 08:45:20 [DEBUG] Initialize key material
2019/01/29 08:45:20 [DEBUG] Making CA filenames absolute
2019/01/29 08:45:20 [INFO] The CA key and certificate files already exist
2019/01/29 08:45:20 [INFO] Key file location: /etc/hyperledger/fabric/ca/3bbd55855d6a60641a2343564bc54be004b7a26b9f4c8af211723c6661a9e9c9_sk
2019/01/29 08:45:20 [INFO] Certificate file location: /etc/hyperledger/fabric/ca/ca.hospital3.switch2logic.co.za-cert.pem
2019/01/29 08:45:20 [DEBUG] Validating the CA certificate and key
2019/01/29 08:45:20 [DEBUG] Check CA certificate for valid dates
2019/01/29 08:45:20 [DEBUG] Check CA certificate for valid usages
2019/01/29 08:45:20 [DEBUG] Check CA certificate for valid IsCA value
2019/01/29 08:45:20 [DEBUG] Check that key type is supported
2019/01/29 08:45:20 [DEBUG] Check that key size is of appropriate length
2019/01/29 08:45:20 [DEBUG] Check that public key and private key match
2019/01/29 08:45:20 [DEBUG] Validation of CA certificate and key successful
2019/01/29 08:45:20 [DEBUG] Loading CN from existing enrollment information
2019/01/29 08:45:20 [DEBUG] Initializing DB
2019/01/29 08:45:20 [DEBUG] Initializing 'sqlite3' database at '/etc/hyperledger/fabric/ca/fabric-ca-server.db'
2019/01/29 08:45:20 [DEBUG] Using sqlite database, connect to database in home (/etc/hyperledger/fabric/ca/fabric-ca-server.db) directory
2019/01/29 08:45:20 [DEBUG] Creating SQLite database (/etc/hyperledger/fabric/ca/fabric-ca-server.db) if it does not exist...
2019/01/29 08:45:20 [DEBUG] Creating users table if it does not exist
2019/01/29 08:45:20 [DEBUG] Creating affiliations table if it does not exist
2019/01/29 08:45:20 [DEBUG] Creating certificates table if it does not exist
2019/01/29 08:45:20 [DEBUG] Creating credentials table if it does not exist
2019/01/29 08:45:20 [DEBUG] Creating revocation_authority_info table if it does not exist
2019/01/29 08:45:20 [DEBUG] Creating nonces table if it does not exist
2019/01/29 08:45:20 [DEBUG] Creating properties table if it does not exist
2019/01/29 08:45:20 [DEBUG] Successfully opened sqlite3 DB
2019/01/29 08:45:20 [DEBUG] Checking database schema...
2019/01/29 08:45:20 [DEBUG] Update SQLite schema, if using outdated schema
2019/01/29 08:45:20 [DEBUG] Initializing identity registry
2019/01/29 08:45:20 [DEBUG] Initialized DB identity registry
2019/01/29 08:45:20 [DEBUG] DB: Get properties [identity.level affiliation.level certificate.level]
2019/01/29 08:45:20 [DEBUG] Checking database levels 'map[affiliation.level:1 certificate.level:1 identity.level:1]' against server levels '&{Identity:1 Affiliation:1 Certificate:1 Credential:1 RAInfo:1 Nonce:1}'
2019/01/29 08:45:20 [DEBUG] Loading identity table
2019/01/29 08:45:20 [DEBUG] Loading identity 'admin'
2019/01/29 08:45:20 [DEBUG] DB: Getting identity admin
2019/01/29 08:45:20 [DEBUG] Identity 'admin' already registered, loaded identity
2019/01/29 08:45:20 [DEBUG] Successfully loaded identity table
2019/01/29 08:45:20 [DEBUG] Loading affiliations table
2019/01/29 08:45:20 [DEBUG] DB: Add affiliation org2
2019/01/29 08:45:20 [DEBUG] Affiliation 'org2' already exists
2019/01/29 08:45:20 [DEBUG] DB: Add affiliation org2.department1
2019/01/29 08:45:20 [DEBUG] Affiliation 'org2.department1' already exists
2019/01/29 08:45:20 [DEBUG] DB: Add affiliation org1
2019/01/29 08:45:20 [DEBUG] Affiliation 'org1' already exists
2019/01/29 08:45:20 [DEBUG] DB: Add affiliation org1.department1
2019/01/29 08:45:20 [DEBUG] Affiliation 'org1.department1' already exists
2019/01/29 08:45:20 [DEBUG] DB: Add affiliation org1.department2
2019/01/29 08:45:20 [DEBUG] Affiliation 'org1.department2' already exists
2019/01/29 08:45:20 [DEBUG] Successfully loaded affiliations table
2019/01/29 08:45:20 [DEBUG] Checking and performing migration, if needed
2019/01/29 08:45:20 [DEBUG] Updating database level to &{Identity:1 Affiliation:1 Certificate:1 Credential:1 RAInfo:1 Nonce:1}
2019/01/29 08:45:20 [INFO] Initialized sqlite3 database at /etc/hyperledger/fabric/ca/fabric-ca-server.db
2019/01/29 08:45:20 [DEBUG] Initializing enrollment signer
2019/01/29 08:45:20 [DEBUG] validating configuration
2019/01/29 08:45:20 [DEBUG] validate local profile
2019/01/29 08:45:20 [DEBUG] profile is valid
2019/01/29 08:45:20 [DEBUG] validate local profile
2019/01/29 08:45:20 [DEBUG] profile is valid
2019/01/29 08:45:20 [DEBUG] validate local profile
2019/01/29 08:45:20 [DEBUG] profile is valid
2019/01/29 08:45:20 [DEBUG] CA initialization successful
2019/01/29 08:45:20 [INFO] Home directory for default CA: /etc/hyperledger/fabric/ca
2019/01/29 08:45:20 [DEBUG] 1 CA instance(s) running on server
2019/01/29 08:45:20 [DEBUG] TLS is enabled
2019/01/29 08:45:20 [DEBUG] TLS Certificate: /etc/hyperledger/fabric/tlsca/tlsca.hospital3.switch2logic.co.za-cert.pem, TLS Key: /etc/hyperledger/fabric/tlsca/e2b480ba873386b7198dc46dd2aef63e790a4a4c0b137256cd317e7a8d869ddc_sk
2019/01/29 08:45:20 [DEBUG] Could not load TLS certificate with BCCSP: Could not find matching private key for SKI: Failed getting key for SKI [[226 180 128 186 135 51 134 183 25 141 196 109 210 174 246 62 121 10 74 76 11 19 114 86 205 49 126 122 141 134 157 220]]: Key with SKI e2b480ba873386b7198dc46dd2aef63e790a4a4c0b137256cd317e7a8d869ddc not found in /etc/hyperledger/fabric/ca/msp/keystore
2019/01/29 08:45:20 [DEBUG] Attempting fallback with certfile /etc/hyperledger/fabric/tlsca/tlsca.hospital3.switch2logic.co.za-cert.pem and keyfile /etc/hyperledger/fabric/tlsca/e2b480ba873386b7198dc46dd2aef63e790a4a4c0b137256cd317e7a8d869ddc_sk
2019/01/29 08:45:20 [DEBUG] Client authentication type requested: noclientcert
2019/01/29 08:45:20 [INFO] Listening on https://0.0.0.0:7054
2019/01/29 09:00:20 [DEBUG] Cleaning up expired nonces for CA 'ca.hospital3.switch2logic.co.za'
2019/01/29 09:15:21 [DEBUG] Cleaning up expired nonces for CA 'ca.hospital3.switch2logic.co.za'
2019/01/29 09:30:21 [DEBUG] Cleaning up expired nonces for CA 'ca.hospital3.switch2logic.co.za'
2019/01/29 09:45:21 [DEBUG] Cleaning up expired nonces for CA 'ca.hospital3.switch2logic.co.za'
2019/01/29 10:00:21 [DEBUG] Cleaning up expired nonces for CA 'ca.hospital3.switch2logic.co.za'
2019/01/29 10:15:21 [DEBUG] Cleaning up expired nonces for CA 'ca.hospital3.switch2logic.co.za'
2019/01/29 10:30:21 [DEBUG] Cleaning up expired nonces for CA 'ca.hospital3.switch2logic.co.za'
2019/01/29 10:33:50 [INFO] Configuration file location: /etc/hyperledger/fabric/ca/fabric-ca-server-config.yaml
2019/01/29 10:33:50 [INFO] Starting server in home directory: /etc/hyperledger/fabric/ca
2019/01/29 10:33:50 [INFO] Server Version: 1.2.0-stable
2019/01/29 10:33:50 [INFO] Server Levels: &{Identity:1 Affiliation:1 Certificate:1 Credential:1 RAInfo:1 Nonce:1}
2019/01/29 10:33:50 [DEBUG] Making server filenames absolute
2019/01/29 10:33:50 [DEBUG] Initializing default CA in directory /etc/hyperledger/fabric/ca
2019/01/29 10:33:50 [DEBUG] Init CA with home /etc/hyperledger/fabric/ca and config {Version:1.2.0-stable Cfg:{Identities:{AllowRemove:false} Affiliations:{AllowRemove:false}} CA:{Name:ca.hospital3.switch2logic.co.za Keyfile:/etc/hyperledger/fabric/ca/3bbd55855d6a60641a2343564bc54be004b7a26b9f4c8af211723c6661a9e9c9_sk Certfile:/etc/hyperledger/fabric/ca/ca.hospital3.switch2logic.co.za-cert.pem Chainfile:ca-chain.pem} Signing:0xc42054b960 CSR:{CN:fabric-ca-server Names:[{C:US ST:North Carolina L: O:Hyperledger OU:Fabric SerialNumber:}] Hosts:[8065e417c46c localhost] KeyRequest:<nil> CA:0xc42054c2e0 SerialNumber:} Registry:{MaxEnrollments:-1 Identities:[{ Name:**** Pass:**** Type:client Affiliation: MaxEnrollments:0 Attrs:map[hf.GenCRL:1 hf.Registrar.Attributes:* hf.AffiliationMgr:1 hf.Registrar.Roles:* hf.Registrar.DelegateRoles:* hf.Revoker:1 hf.IntermediateCA:1]  }]} Affiliations:map[org1:[department1 department2] org2:[department1]] LDAP:{ Enabled:false URL:ldap://****:****@<host>:<port>/<base> UserFilter:(uid=%s) GroupFilter:(memberUid=%s) Attribute:{[uid member] [{ }] map[groups:[{ }]]} TLS:{false [] { }}  } DB:{ Type:sqlite3 Datasource:fabric-ca-server.db TLS:{false [] { }}  } CSP:0xc420530d50 Client:<nil> Intermediate:{ParentServer:{ URL: CAName:  } TLS:{Enabled:false CertFiles:[] Client:{KeyFile: CertFile:}} Enrollment:{ Name: Secret:**** CAName: AttrReqs:[] Profile: Label: CSR:<nil> Type:x509  }} CRL:{Expiry:24h0m0s} Idemix:{IssuerPublicKeyfile: IssuerSecretKeyfile: RevocationPublicKeyfile: RevocationPrivateKeyfile: RHPoolSize:0 NonceExpiration: NonceSweepInterval:}}
2019/01/29 10:33:50 [DEBUG] CA Home Directory: /etc/hyperledger/fabric/ca
2019/01/29 10:33:50 [DEBUG] Checking configuration file version '1.2.0-stable' against server version: '1.2.0-stable'
2019/01/29 10:33:50 [DEBUG] Initializing BCCSP: &{ProviderName:SW SwOpts:0xc420530db0 PluginOpts:<nil> Pkcs11Opts:<nil>}
2019/01/29 10:33:50 [DEBUG] Initializing BCCSP with software options &{SecLevel:256 HashFamily:SHA2 Ephemeral:false FileKeystore:0xc42054b170 DummyKeystore:<nil>}
2019/01/29 10:33:50 [DEBUG] Initialize key material
2019/01/29 10:33:50 [DEBUG] Making CA filenames absolute
2019/01/29 10:33:50 [INFO] The CA key and certificate files already exist
2019/01/29 10:33:50 [INFO] Key file location: /etc/hyperledger/fabric/ca/3bbd55855d6a60641a2343564bc54be004b7a26b9f4c8af211723c6661a9e9c9_sk
2019/01/29 10:33:50 [INFO] Certificate file location: /etc/hyperledger/fabric/ca/ca.hospital3.switch2logic.co.za-cert.pem
2019/01/29 10:33:50 [DEBUG] Validating the CA certificate and key
2019/01/29 10:33:50 [DEBUG] Check CA certificate for valid dates
2019/01/29 10:33:50 [DEBUG] Check CA certificate for valid usages
2019/01/29 10:33:50 [DEBUG] Check CA certificate for valid IsCA value
2019/01/29 10:33:50 [DEBUG] Check that key type is supported
2019/01/29 10:33:50 [DEBUG] Check that key size is of appropriate length
2019/01/29 10:33:50 [DEBUG] Check that public key and private key match
2019/01/29 10:33:50 [DEBUG] Validation of CA certificate and key successful
2019/01/29 10:33:50 [DEBUG] Loading CN from existing enrollment information
2019/01/29 10:33:50 [DEBUG] Initializing DB
2019/01/29 10:33:50 [DEBUG] Initializing 'sqlite3' database at '/etc/hyperledger/fabric/ca/fabric-ca-server.db'
2019/01/29 10:33:50 [DEBUG] Using sqlite database, connect to database in home (/etc/hyperledger/fabric/ca/fabric-ca-server.db) directory
2019/01/29 10:33:50 [DEBUG] Creating SQLite database (/etc/hyperledger/fabric/ca/fabric-ca-server.db) if it does not exist...
2019/01/29 10:33:50 [DEBUG] Creating users table if it does not exist
2019/01/29 10:33:50 [DEBUG] Creating affiliations table if it does not exist
2019/01/29 10:33:50 [DEBUG] Creating certificates table if it does not exist
2019/01/29 10:33:50 [DEBUG] Creating credentials table if it does not exist
2019/01/29 10:33:50 [DEBUG] Creating revocation_authority_info table if it does not exist
2019/01/29 10:33:50 [DEBUG] Creating nonces table if it does not exist
2019/01/29 10:33:50 [DEBUG] Creating properties table if it does not exist
2019/01/29 10:33:50 [DEBUG] Successfully opened sqlite3 DB
2019/01/29 10:33:50 [DEBUG] Checking database schema...
2019/01/29 10:33:50 [DEBUG] Update SQLite schema, if using outdated schema
2019/01/29 10:33:50 [DEBUG] Initializing identity registry
2019/01/29 10:33:50 [DEBUG] Initialized DB identity registry
2019/01/29 10:33:50 [DEBUG] DB: Get properties [identity.level affiliation.level certificate.level]
2019/01/29 10:33:50 [DEBUG] Checking database levels 'map[identity.level:1 affiliation.level:1 certificate.level:1]' against server levels '&{Identity:1 Affiliation:1 Certificate:1 Credential:1 RAInfo:1 Nonce:1}'
2019/01/29 10:33:50 [DEBUG] Loading identity table
2019/01/29 10:33:50 [DEBUG] Loading identity 'admin'
2019/01/29 10:33:50 [DEBUG] DB: Getting identity admin
2019/01/29 10:33:50 [DEBUG] Identity 'admin' already registered, loaded identity
2019/01/29 10:33:50 [DEBUG] Successfully loaded identity table
2019/01/29 10:33:50 [DEBUG] Loading affiliations table
2019/01/29 10:33:50 [DEBUG] DB: Add affiliation org2
2019/01/29 10:33:50 [DEBUG] Affiliation 'org2' already exists
2019/01/29 10:33:50 [DEBUG] DB: Add affiliation org2.department1
2019/01/29 10:33:50 [DEBUG] Affiliation 'org2.department1' already exists
2019/01/29 10:33:50 [DEBUG] DB: Add affiliation org1
2019/01/29 10:33:50 [DEBUG] Affiliation 'org1' already exists
2019/01/29 10:33:50 [DEBUG] DB: Add affiliation org1.department1
2019/01/29 10:33:50 [DEBUG] Affiliation 'org1.department1' already exists
2019/01/29 10:33:50 [DEBUG] DB: Add affiliation org1.department2
2019/01/29 10:33:50 [DEBUG] Affiliation 'org1.department2' already exists
2019/01/29 10:33:50 [DEBUG] Successfully loaded affiliations table
2019/01/29 10:33:50 [DEBUG] Checking and performing migration, if needed
2019/01/29 10:33:50 [DEBUG] Updating database level to &{Identity:1 Affiliation:1 Certificate:1 Credential:1 RAInfo:1 Nonce:1}
2019/01/29 10:33:50 [INFO] Initialized sqlite3 database at /etc/hyperledger/fabric/ca/fabric-ca-server.db
2019/01/29 10:33:50 [DEBUG] Initializing enrollment signer
2019/01/29 10:33:50 [DEBUG] validating configuration
2019/01/29 10:33:50 [DEBUG] validate local profile
2019/01/29 10:33:50 [DEBUG] profile is valid
2019/01/29 10:33:50 [DEBUG] validate local profile
2019/01/29 10:33:50 [DEBUG] profile is valid
2019/01/29 10:33:50 [DEBUG] validate local profile
2019/01/29 10:33:50 [DEBUG] profile is valid
2019/01/29 10:33:50 [DEBUG] CA initialization successful
2019/01/29 10:33:50 [INFO] Home directory for default CA: /etc/hyperledger/fabric/ca
2019/01/29 10:33:50 [DEBUG] 1 CA instance(s) running on server
2019/01/29 10:33:50 [DEBUG] TLS is enabled
2019/01/29 10:33:50 [DEBUG] TLS Certificate: /etc/hyperledger/fabric/tlsca/tlsca.hospital3.switch2logic.co.za-cert.pem, TLS Key: /etc/hyperledger/fabric/tlsca/e2b480ba873386b7198dc46dd2aef63e790a4a4c0b137256cd317e7a8d869ddc_sk
2019/01/29 10:33:50 [DEBUG] Could not load TLS certificate with BCCSP: Could not find matching private key for SKI: Failed getting key for SKI [[226 180 128 186 135 51 134 183 25 141 196 109 210 174 246 62 121 10 74 76 11 19 114 86 205 49 126 122 141 134 157 220]]: Key with SKI e2b480ba873386b7198dc46dd2aef63e790a4a4c0b137256cd317e7a8d869ddc not found in /etc/hyperledger/fabric/ca/msp/keystore
2019/01/29 10:33:50 [DEBUG] Attempting fallback with certfile /etc/hyperledger/fabric/tlsca/tlsca.hospital3.switch2logic.co.za-cert.pem and keyfile /etc/hyperledger/fabric/tlsca/e2b480ba873386b7198dc46dd2aef63e790a4a4c0b137256cd317e7a8d869ddc_sk
2019/01/29 10:33:50 [DEBUG] Client authentication type requested: noclientcert
2019/01/29 10:33:50 [INFO] Listening on https://0.0.0.0:7054
2019/01/29 10:48:50 [DEBUG] Cleaning up expired nonces for CA 'ca.hospital3.switch2logic.co.za'
2019/01/29 11:03:50 [DEBUG] Cleaning up expired nonces for CA 'ca.hospital3.switch2logic.co.za'
2019/01/29 11:18:50 [DEBUG] Cleaning up expired nonces for CA 'ca.hospital3.switch2logic.co.za'
